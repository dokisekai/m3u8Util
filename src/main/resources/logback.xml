<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- 定义一个名为STDOUT的appender，它的类型为ConsoleAppender -->
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <!-- 定义日志的编码格式 -->
        <encoder>
            <pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n</pattern>
        </encoder>
    </appender>

    <!-- 定义一个名为ROLLING的appender，它的类型为RollingFileAppender -->
    <appender name="ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 定义滚动策略，这里使用的是SizeAndTimeBasedRollingPolicy -->
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <!-- 每个日志文件的最大大小 -->
            <maxFileSize>1KB</maxFileSize>
            <!-- 日志文件的最大历史记录 -->
            <maxHistory>180</maxHistory>
            <!-- 总大小限制，当所有日志文件的总大小超过这个值时，logback会删除最早的日志文件，直到总大小不超过这个值 -->
            <totalSizeCap>32GB</totalSizeCap>
            <!-- 文件名模式，%d{yyyy-MM-dd}表示日期，%i表示索引 -->
            <fileNamePattern>logs/m3u8util:%d{yyyy-MM-dd}:%i.log</fileNamePattern>
        </rollingPolicy>
        <!-- 定义日志的编码格式 -->
        <encoder>
            <pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n</pattern>
        </encoder>
    </appender>

    <!-- 定义root logger的级别为info，并使用上面定义的ROLLING和STDOUT appender -->
    <root level="info">
        <appender-ref ref="ROLLING" />
        <appender-ref ref="STDOUT" />
    </root>
</configuration>